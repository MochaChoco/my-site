---
title: "광고 차단 확장 프로그램과의 전쟁"
description: "이벤트 배너가 특정 사용자에게만 보이지 않는 문제를 추적하며 광고 차단 확장 프로그램의 필터링 메커니즘을 이해하고, CSS 클래스명 변경으로 문제를 해결한 경험을 공유합니다."
date: "2025-01-13"
tags: ["frontend", "debugging", "adblock"]
slug: "adblock-battle"
coverImage: "/images/posts/adblock-battle/cover.png"
---

안녕하세요, 프론트엔드 웹 서비스 개발 과정에서 겪었던 흥미로운 이슈와 해결 경험을 공유하고자 합니다. 개발을 하다 보면 예상치 못한 곳에서 문제가 발생하고, 그 원인을 파헤치는 과정에서 새로운 지식을 얻게 되는 경우가 많죠. 최근 저희 팀은 특정 사용자에게만 이벤트 배너가 노출되지 않는 현상을 겪었습니다. 처음에는 단순한 버그라고 생각했지만, 원인을 추적하는 과정에서 광고 차단 확장 프로그램의 동작 방식과 웹 요소의 이름이 얼마나 중요한지에 대한 깊은 깨달음을 얻게 되었습니다.

이 문제는 `이벤트 배너 컴포넌트`에서 발생했습니다. 이 컴포넌트는 사이트의 다양한 이벤트 배너를 사용자에게 보여주는 역할을 담당하고 있었죠. 그런데 일부 사용자들에게서 "배너가 안 보입니다"라고 CS가 올라오기 시작했습니다. 일반적인 테스트 환경에서는 재현되지 않아 답답했지만, 문제 해결을 위해 끈질기게 원인을 파고들었습니다. 그리고 마침내, 범인은 다름 아닌 사용자들의 브라우저에 설치된 '광고 차단 확장 프로그램'이라는 것을 밝혀냈습니다.

## 광고 차단 확장 프로그램, 그리고 보이지 않는 장벽

이번 이슈의 핵심은 광고 차단 확장 프로그램이 웹 페이지의 특정 요소를 어떻게 식별하고 차단하는지 이해하는 데 있었습니다. 단순히 "광고를 막아준다"고만 생각했던 이 프로그램들이 내부적으로 어떻게 작동하는지 자세히 알아보면서 문제의 실마리를 찾을 수 있었습니다.

### 광고 차단 확장 프로그램의 작동 원리

AdGuard나 AdBlock 같은 광고 차단 확장 프로그램들은 사용자가 웹사이트를 방문할 때 웹 페이지의 로딩 과정에 개입합니다. 이들은 광고 서버로의 요청을 가로채거나, 웹 페이지를 구성하는 HTML 요소와 CSS 스타일을 분석하여 광고로 의심되는 콘텐츠를 제거하거나 숨기는 방식으로 작동합니다. 단순히 광고 이미지만 가리는 것이 아니라, 특정 스크립트의 실행을 막거나, HTML 구조 자체를 조작하여 광고 요소를 페이지에서 완전히 배려하기도 합니다.

### 필터링 목록: 광고 차단의 설계도

광고 차단 확장 프로그램이 어떤 요소를 차단할지 결정하는 기준은 바로 **필터링 목록(Filtering Lists)**입니다. 이 목록은 광고로 식별되는 URL, 스크립트 경로, 그리고 HTML 요소 및 CSS 클래스 등의 패턴을 포함하고 있습니다. [**EasyList**](http://www.easylist.to)는 가장 널리 사용되는 필터링 목록 중 하나로, 전 세계 커뮤니티에 의해 지속적으로 업데이트되며 새로운 광고 기술에 대응하고 있습니다.

예를 들어, 필터링 목록에는 `##.ad-banner`와 같은 규칙이 포함될 수 있습니다. 이 규칙은 웹 페이지에서 `ad-banner`라는 클래스 이름을 가진 모든 요소를 차단하라는 지시입니다. 광고 차단기는 이 목록에 있는 규칙과 웹 페이지의 요소를 대조하여 일치하는 경우 해당 요소를 로드하지 않거나 숨김 처리하는 것이죠.

### CSS 클래스 선택자와 예상치 못한 부작용

**CSS 클래스 선택자**는 웹 개발에서 특정 HTML 요소에 스타일을 적용하기 위해 광범위하게 사용됩니다. `<div class="my-component">`처럼 HTML 요소에 `class` 속성을 부여하고, CSS에서 `.my-component`와 같은 형식으로 해당 클래스를 선택하여 스타일을 정의합니다. 이는 웹 페이지의 디자인과 구조를 유연하게 관리하고 재사용성을 높이는 데 필수적인 개념입니다.

하지만 이번 이슈에서 우리는 클래스 이름이 단순히 시각적인 목적을 넘어, 광고 차단기와 같은 외부 도구에 의해 특정 요소를 식별하는 데 사용될 수 있음을 명확하게 깨달았습니다. 우리의 `이벤트 배너 컴포넌트`가 사용하고 있던 `ad-banner`라는 클래스명은 불행히도 EasyList와 같은 필터링 목록에 '광고'로 인식될 수 있는 패턴으로 포함되어 있었던 것입니다. 즉, 우리가 의도한 것은 단순한 '이벤트 배너'였지만, 외부의 기준에서는 '광고'로 오인되어 차단되고 있었던 셈입니다.

## 구현 포인트: 클래스명 변경으로 장벽 넘기

문제의 원인을 파악하고 나니 해결책은 의외로 간단했습니다. `ad-banner`라는 클래스명이 필터링 목록에 걸렸다면, 이 클래스명을 광고 차단기가 탐지할 수 없는 다른 이름으로 변경하면 되는 것이었습니다.

`src/components/ui/banners/EventBanner.vue` 파일에서 사용되던 클래스명을 `line-banner`로 변경하기로 결정했습니다. 이 변경은 `EventBanner.vue` 컴포넌트의 템플릿과 `<style>` 블록에 걸쳐 이루어졌습니다.

### 💡 Before: 광고 차단 확장 프로그램에 탐지된 클래스명

아래 코드는 클래스명 변경 전의 `EventBanner.vue` 컴포넌트의 일부입니다. `ad-banner`라는 클래스명이 `<template>`의 `div` 요소와 `<style>` 블록에 적용되어 있었습니다.

```vue
<template>
  <!--
    EventBanner 컴포넌트의 템플릿 구조입니다.
    bannerData의 길이에 따라 배너를 렌더링할지 결정합니다.
    'ad-banner' 클래스가 직접적으로 광고 차단 필터링 목록에 포함되어 문제의 원인이 되었습니다.
  -->
  <div
    v-if="bannerData?.length"
    class="ad-banner"
    :class="{
      'is-empty': status === 'success' && bannerData?.length === 0,
    }"
  >
    <!-- 
      실제 배너 콘텐츠가 여기에 들어갑니다.
      예시: 이미지 슬라이더, 이벤트 링크 등
    -->
    <div class="banner-content">
      <img src="/assets/event-banner-image.png" alt="이벤트 배너" />
      <p>놓칠 수 없는 특별한 이벤트!</p>
    </div>
  </div>
</template>
```

위 코드는 `EventBanner.vue` 컴포넌트의 템플릿과 스타일 부분입니다. `ad-banner`라는 클래스명이 HTML 요소에 적용되어 있었고, 이 이름이 광고 차단 확장 프로그램의 필터링 규칙에 걸려 배너 노출이 차단되었습니다. 특히 `v-if` 조건부 렌더링은 데이터 유무에 따라 컴포넌트 노출을 제어했지만, 클래스명 자체가 문제였기 때문에 데이터가 있더라도 최종적으로 브라우저에서 렌더링되지 않았습니다. `<style>` 블록에서는 이 클래스에 대한 기본적인 레이아웃과 디자인이 정의되어 있었고, `@include media-query`를 통해 반응형 디자인도 고려하고 있었습니다.

### 💡 After: 새로운 이름, `line-banner`로 우회 성공

다음은 클래스명을 `line-banner`로 변경한 후의 코드입니다. 코드의 기능적인 변화는 전혀 없지만, 클래스명 변경만으로 문제를 해결할 수 있었습니다.

```vue
<template>
  <!--
    EventBanner 컴포넌트의 템플릿 구조.
    'ad-banner' 클래스명을 'line-banner'로 변경하여 광고 차단 필터링을 우회합니다.
    기존의 조건부 렌더링 로직은 그대로 유지됩니다.
  -->
  <div
    v-if="bannerData?.length"
    class="line-banner"
    :class="{
      'is-empty': status === 'success' && bannerData?.length === 0,
    }"
  >
    <!-- 
      배너 콘텐츠는 변경 없이 유지됩니다.
      주요 목표는 콘텐츠 자체의 노출이지, 특정 클래스명을 고수하는 것이 아니었습니다.
    -->
    <div class="banner-content">
      <img src="/assets/event-banner-image.png" alt="이벤트 배너" />
      <p>놓칠 수 없는 특별한 이벤트!</p>
    </div>
  </div>
</template>
```

변경된 코드는 템플릿의 `class` 속성과 `<style>` 블록 내의 선택자만 `ad-banner`에서 `line-banner`로 바뀌었을 뿐, 나머지 로직이나 스타일은 모두 동일합니다. 이 단순한 변경으로 광고 차단 확장 프로그램의 필터링을 성공적으로 우회할 수 있었고, 배너는 모든 사용자에게 정상적으로 노출되기

—

## 적용 결과 및 배운 점

클래스명을 `ad-banner`에서 `line-banner`로 변경한 후, 특정 사용자에게 발생하던 이벤트 배너 미노출 문제는 완벽하게 해결되었습니다. 단순한 클래스명 변경이었지만, 이 과정에서 다음과 같은 중요한 교훈을 얻을 수 있었습니다.

1.  **광고 차단 확장 프로그램의 동작 방식 이해의 중요성**: 개발 과정에서 외부 환경, 특히 사용자 브라우저의 확장 프로그램이 웹 요소에 어떤 영향을 미칠 수 있는지 간과해서는 안 된다는 것을 깨달았습니다. EasyList와 같은 필터링 목록의 존재와 작동 방식을 이해하는 것이 중요합니다.
2.  **클래스명 선정의 신중함**: UI 컴포넌트의 클래스명이 단순히 스타일링을 위한 것이 아니라, 외부 도구에 의해 특정 요소를 식별하는 '표지판' 역할을 할 수 있음을 알게 되었습니다. 따라서 클래스명을 선정할 때는 기능적인 의미와 함께 잠재적인 외부 영향까지 고려해야 합니다.
3.  **임시방편과 근본적인 해결책 사이**: 이번 클래스명 변경은 즉각적인 문제 해결에는 효과적이었지만, 이는 일종의 '우회 전략'입니다. 광고 차단 확장 프로그램의 필터링 목록은 지속적으로 업데이트되므로, 언젠가 `line-banner`와 같은 이름도 필터링 대상이 될 가능성을 배제할 수 없습니다. 장기적으로는 서버사이드 렌더링을 강화하거나, 광고 차단기가 해석하기 어려운 방식으로 콘텐츠를 동적으로 구성하는 등의 보다 근본적인 해결책을 고민해야 할 수도 있습니다.

이번 경험은 개발자가 코드를 작성할 때 단순히 기능 구현을 넘어, 코드가 배포될 환경과 다양한 외부 요인까지 함께 고려해야 함을 다시 한번 상기시켜 주었습니다. 작은 변화로 큰 문제를 해결했지만, 그 과정에서 얻은 인사이트는 앞으로 더 견고한 웹 서비스를 만드는 데 큰 자산이 될 것입니다.

## 참고 자료

- EasyList is in trouble and so are many ad blockers: [https://adguard.com/en/blog/easylist-filter-problem-help.html](https://adguard.com/en/blog/easylist-filter-problem-help.html)
- EasyList 공식 웹사이트: [http://www.easylist.to/](http://www.easylist.to/)
- MDN Web Docs (클래스 선택자): [https://developer.mozilla.org/ko/docs/Web/CSS/Class_selectors](https://developer.mozilla.org/ko/docs/Web/CSS/Class_selectors)
- MDN Web Docs (CSS 선택자): [https://developer.mozilla.org/ko/docs/Web/CSS/CSS_Selectors](https://developer.mozilla.org/ko/docs/Web/CSS/CSS_Selectors)
